{% extends 'blog/base.html' %}
{% block main %}

<h2 class="mb-4">üß∫ –ö–æ—Ä–∑–∏–Ω–∞</h2>

{% if cart.total_qty == 0 %}
  <div class="alert alert-info">–ö–æ—Ä–∑–∏–Ω–∞ –ø—É—Å—Ç–∞.</div>
  <a href="{% url 'product_list' %}" class="btn btn-primary">–ü–µ—Ä–µ–π—Ç–∏ –≤ –∫–∞—Ç–∞–ª–æ–≥</a>
{% else %}
  <div class="table-responsive">
    <table class="table table-dark table-striped align-middle">
      <thead>
        <tr>
          <th>–¢–æ–≤–∞—Ä</th>
          <th style="width:120px">–ö–æ–ª-–≤–æ</th>
          <th>–¶–µ–Ω–∞</th>
          <th>–°—É–º–º–∞</th>
          <th></th>
        </tr>
      </thead>
      <tbody>
      {% for pid, item in cart.items.items %}
        <tr>
          <td>
            <div class="d-flex align-items-center gap-3">
              {% if item.image %}
                <img src="{{ item.image }}" style="width:64px;height:64px;object-fit:cover;border-radius:6px;">
              {% endif %}
              <a href="{% url 'product_detail' item.slug %}" class="text-decoration-none">{{ item.name }}</a>
            </div>
          </td>
          <td>{{ item.qty }}</td>
          <td>{{ item.price }} ‚Ç¥</td>
          <td>{{ item.subtotal|floatformat:2 }} ‚Ç¥</td>
          <td>
            <a href="{% url 'cart_remove' pid %}" class="btn btn-sm btn-outline-danger">–£–¥–∞–ª–∏—Ç—å</a>
          </td>
        </tr>
      {% endfor %}
      </tbody>
    </table>
  </div>

  <div class="d-flex justify-content-between align-items-center mt-3">
    <div>
      <a href="{% url 'cart_clear' %}" class="btn btn-outline-secondary">–û—á–∏—Å—Ç–∏—Ç—å</a>
      <a href="{% url 'product_list' %}" class="btn btn-link">‚Üê –í –∫–∞—Ç–∞–ª–æ–≥</a>
    </div>
    <div class="fs-5">
      –ò—Ç–æ–≥–æ: <strong>{{ cart.total_sum|floatformat:2 }} ‚Ç¥</strong> (—Ç–æ–≤–∞—Ä–æ–≤: {{ cart.total_qty }})
      <a href="{% url 'cart_checkout' %}" class="btn btn-success ms-3">–û—Ñ–æ—Ä–º–∏—Ç—å –∑–∞–∫–∞–∑</a>
    </div>
  </div>
{% endif %}

{% endblock %}
